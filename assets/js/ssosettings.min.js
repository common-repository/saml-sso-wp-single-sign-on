function removeURLParameter(e,t){var o=new RegExp("([&\\?])"+t+"=[^&]*(&|$)","i");return e.replace(o,"$1").replace(/&$/,"")}function getUrlParameter(e){var t,o,a=window.location.search.substring(1).split("&");for(o=0;o<a.length;o++)if((t=a[o].split("="))[0]===e)return void 0===t[1]||decodeURIComponent(t[1]);return!1}function changeActiveSubtab(){$kw(".kw-subpage-container").addClass("hidden");var e=getUrlParameter("subpage");$kw("#"+e+"-container").removeClass("hidden")}function kwsso_contactus_goback(){$kw(".kwsso_contactus_popup_container").hide(),$kw(".kwsso_contactus_container").hide()}function kwsso_check_if_query_valid(e){!/^[a-zA-Z?,.\(\)\/@ 0-9]*$kw/.test(e.value)&&(e.value=e.value.replace(/[^a-zA-Z?,.\(\)\/@ 0-9]/,""))}function toggleSupportForm(e){var t=$kw("#support_form").prev(".kwsso_box-modal-backdrop");"toggle"!==e&&t.is(":hidden")||$kw("#support_form").slideToggle(400,(function(){t.is(":hidden")?t.show():t.hide()}))}function contactUsOnClick(e){void 0!==e&&e.length>0&&(document.getElementById("contactQuery").value=e),$kw("#contact-us-toggle").prop("checked",!0),$kw(".kwsso_contactus_popup_container").show(),$kw(".kwsso_contactus_container").slideDown(300)}function upgrade_to_premium(){url="https://keywoot.com",window.open(url,"_blank").focus()}function kwCopyToClipboard(e,t,o){var a=jQuery("<input>");jQuery("body").append(a),a.val(jQuery(t).text()).select(),document.execCommand("copy"),a.remove(),jQuery(".tooltiptext").text("Copied"),"#metadata_url_copy"===o&&(jQuery("#showcopied").show(300),setTimeout((()=>jQuery("#showcopied").hide(300)),1e3)),jQuery(e).mouseout((function(){setTimeout((()=>jQuery(".tooltiptext").text("Copy to Cipboard")),100)}))}function showIDPAtributeTable(){jQuery("div[name='idp_attributes_table']").slideToggle(300)}function roleMappingToggleEnable(){var e=""===$kw('select[name="kwsso_mapping_group_name"]').eq(0).val();$kw('[name*="kwsso_mapping_group_attr_values_"]').prop("disabled",e),$kw("#assign_default_role, #dont_allow_unlisted_user_role, #dont_create_user_if_role_not_mapped").prop("disabled",e)}jQuery(document).ready((function(){$kw=jQuery,$kw('[name="button-loader"]').hide(),$kw(".kw-button.primary").on("click",(function(){var e=$kw(this).find('svg[name="button-loader"]');e.show(),setTimeout((function(){e.hide()}),3e3)})),$kw("#add-new-idp-button").on("click",(function(){$kw("#kwsso_idp_selection_form").show(),$kw("#configured-idp-container").hide()})),$kw("#kw-edit-configuration-button").on("click",(function(){const e=new URL(window.location);e.searchParams.set("ConfIdpPage",""),window.history.pushState({},"",e),$kw("#idpform").show(),$kw("#configured-idp-container").hide(),$kw("#kwsso_idp_selection_form").hide()})),$kw("#go_back_to_configured_idp_button").on("click",(function(){var e=removeURLParameter(window.location.href,"ConfIdpPage");history.replaceState({},"",e),$kw("#idpform").hide(),$kw("#kwsso_idp_selection_form").hide(),$kw("#configured-idp-container").show()})),$kw("#kw-remove-idp-configuration").on("click",(function(){$kw("#kwdeleteIDPModal").show()})),$kw('button[name="hide_remove_idp_conf_alert"]').on("click",(function(){$kw("#kwdeleteIDPModal").hide()})),jQuery("#kwsso_view_more_roles").click((function(){const e=jQuery(".kw-sso-role-row");if(0===e.length)return;const t=jQuery("#kwsso_view_more_roles"),o="View More  ᐯ",a="View Less  ᐱ";e.each((function(e){t.text()===o&&jQuery(this).css("display","table-row"),e>=8&&t.text()===a&&jQuery(this).css("display","none")})),t.text()===o?t.text(a):t.text(o)})),$kw('input[name="kwsso_mapping_action_if_role_not_configured"]').each((function(){if($kw(this).is(":checked")&&"none_role"!==$kw(this).val()){var e=$kw(this).val();$kw("#kwsso_default_role_for_"+e).css("display","block")}}));var e=$kw("#kwsso_default_role_for_default_role"),t=$kw("#kwsso_default_role_for_dont_create"),o=$kw("#assign_default_role"),a=$kw("#dont_allow_unlisted_user_role"),n=$kw("#dont_create_user_if_role_not_mapped");$kw("#assign_default_role").is(":checked")?e.css("display","block"):$kw("#dont_create_user_if_role_not_mapped").is(":checked")&&t.css("display","block"),$kw("#assign_default_role").change((function(){$kw(this).is(":checked")?(e.css("display","block"),a.prop("checked",!1),n.prop("checked",!1)):e.css("display","none"),t.css("display","none")})),$kw("#dont_allow_unlisted_user_role").click((function(){e.css("display","none"),t.css("display","none"),o.prop("checked",!1),n.prop("checked",!1)})),$kw("#dont_create_user_if_role_not_mapped").change((function(){$kw(this).is(":checked")?(t.css("display","block"),o.prop("checked",!1),a.prop("checked",!1)):t.css("display","none"),e.css("display","none")})),jQuery("#sync_metadata_1").click((function(){jQuery("#select_time_sync_metadata_1").slideToggle(400)})),jQuery("#sync_metadata_2").click((function(){jQuery("#select_time_sync_metadata_2").slideToggle(400)}))})),jQuery(document).ready((function(){$kw=jQuery,$kw("#kwsso_close_notice_button").click((function(){var e=jQuery("#kwsso_notice_modal").attr("name"),t=jQuery("#_wpnonce").attr("value");$kw("#kwsso_notice_modal").hide(),$kw.ajax({url:"admin-ajax.php",type:"POST",data:{action:"kwsso_modal_action",security:t,shown_remaining:e},crossDomain:!0,dataType:"json",success:function(e){},error:function(e,t,o){}})})),$kw("#searchForm").on("keyup",(function(){var e=$kw(this).val();$kw(".search-dropdown-container-content .search_box").each((function(t){$row=$kw(this),$row.find(".kwsso_search").data("value").toLowerCase().indexOf(e.toLowerCase())>=0?$row.show():($row.hide(),$row.find(".kwsso_search").data("value").indexOf("Can't")>=0&&$row.show())}))})),$kw(".kwsso_box-modal-backdrop").click((function(e){kwsso_feedback_goback(),toggleSupportForm("hide")})),jQuery(document.body).on("click","#kw-dismiss-main-admin-notice",(function(e){$kw.ajax({url:"admin-ajax.php",type:"POST",data:{action:"kwsso_dismiss_notice"},crossDomain:!0,dataType:"json",success:function(){return $kw("#kw-admin-notice-container").hide(),!0},error:function(){return!1}})})),$kw(".kw-subtab-item").click((function(e){if(document.querySelectorAll(".kw-subtab-item").forEach((e=>{$kw(e).removeClass("kw-subtab-item-active")})),document.querySelectorAll(".kw-subtab-title").forEach((e=>{$kw(e).removeClass("kw-subtab-title-active")})),"SPAN"==e.target.nodeName){$kw(e.target).parent().addClass("kw-subtab-item-active"),$kw(e.target).addClass("kw-subtab-title-active");var t=$kw(e.target).attr("id")}else if("DIV"==e.target.nodeName){$kw(e.target).addClass("kw-subtab-item-active"),$kw(e.target).find("span.kw-subtab-title").addClass("kw-subtab-title-active");t=$kw(e.target).children().attr("id")}const o=new URL(window.location);o.searchParams.set("subpage",t),window.history.pushState({},"",o),changeActiveSubtab()})),setTimeout((function(){$kw("#status_result_notice").hide(800)}),6e3),$kw(".search_box").on("click",(function(){const e=$kw(this).attr("id"),t=new URL(window.location);t.searchParams.set("ConfIdpPage",e),window.history.pushState({},"",t),$kw("#kwsso_idp_selection_form").css("display","none"),$kw("#idpform").css("display","block");var o=$kw(this).attr("name"),a=$kw(this).find("[data-value]").attr("data-value");$kw("input[name='saml_identity_provider_name']").val(o),$kw("input[name='kwsso_saml_idp_key']").val(a)})),$kw("#go_back_to_idp_list").on("click",(function(){$kw("#kwsso_idp_selection_form").css("display",""),$kw("#idpform").css("display","none");var e=removeURLParameter(window.location.href,"ConfIdpPage");history.replaceState({},"",e)})),$kw("#configureitmanualy").on("click",(function(){$kw(".toggleformdiv").slideToggle(500)}));var e=getUrlParameter("subpage");if(e){var t=e;$kw("#"+t).parent().addClass("kw-subtab-item-active"),$kw("#"+t).addClass("kw-subtab-title-active")}else $kw($kw(".kw-subtab-item")[0]).addClass("kw-subtab-item-active"),$kw($kw(".kw-subtab-title")[0]).addClass("kw-subtab-title-active");$kw("#upload_idp_metadata").on("click",(function(){$kw("#upload_idp_metadata_actual").click()})),$kw("#upload_idp_metadata_actual").change((function(e){var t=e.target.files[0].name;$kw("#choosen_file_id").html(t)}))})),jQuery(document).ready((function(e){$kw('tr[data-slug="saml-sso-wp-single-sign-on"] .deactivate a').on("click",(function(e){e.preventDefault(),$kw("#kwsso-feedback-deactivation-modal").show(),setTimeout((function(){$kw(".kwsso-feedback-progress").css("width","100%")}),300)})),$kw("#kwsso-feedback-skip-feedback").on("click",(function(e){e.preventDefault(),window.location.href=$kw('tr[data-slug="saml-sso-wp-single-sign-on"] .deactivate a').attr("href")})),$kw("#kwsso-feedback-close-modal").on("click",(function(){$kw("#kwsso-feedback-deactivation-modal").hide()}))}));